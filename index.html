<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>Traffic Accidents Involving Cyclists | ACT</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
	
	<!-- Mapbox -->
    <script src='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.js'></script>
	<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-heat/v0.1.3/leaflet-heat.js'></script>
	<link href='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.css' rel='stylesheet' />
	
	<!-- JQuery -->	
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>

	<!-- Data -->
    <script src='data/data.js'></script>
	<script src='data/locations.js'></script>
	
	<!-- Bootstrap -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
	<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
	
	<!-- Other Styling -->
    <link rel="stylesheet" href="./static/css/additional_style.css">
	
</head>
<body>
	<div class="container-fluid">
		<div class="row">
			<nav class="navbar navbar-inverse">
				<div class="navbar-header">
					<a class="navbar-brand" href="">Traffic Accidents Involving Cyclists | ACT</a>
				</div>
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
					<ul class="nav navbar-nav">
						<li><a id="download-data" href="http://brettromero.com">Back to Article</a></li>
					</ul>
					<ul class="nav navbar-nav navbar-right">
						<li><a id="download-data" href="https://www.data.act.gov.au/Transport/Cyclist-Crashes/n2kg-qkwj">Download Data</a></li>
					</ul>
				</div> <!-- navbar-collapse -->
			</nav>
		</div>
		<div class="row">
			<div class="col-md-1">
				<div class="form">
					<div class="btn-group-vertical btn-group" data-toggle="buttons">
						<label class="btn btn-default btn-block active"><input type="radio" name="optradio" value="heatmap" checked>Heatmap</label>
						<label class="btn btn-default btn-block"><input type="radio" name="optradio" value="featureLayer">Markers</label>
					</div>
				</div>
			</div>
			<div class="col-md-11">
				<div id='map'>
					<script>
					//Activate Map
					L.mapbox.accessToken = 'pk.eyJ1IjoiYnJldHRyb21lcm8iLCJhIjoiMDNmMGMyNDlmYTNhOTE1OTMxMDBlOTlmMzlhYWI1NzcifQ.8h_c4cDzPK3GMVVDlbE-VQ';
					
					var map = L.mapbox.map('map', 'mapbox.streets')
						.setView([-35.3075, 149.124417], 12);
					
					var layers = document.getElementById('menu-ui');

					// Heat Map Layer
					var heatmap = L.heatLayer( locations, 
						{
							minOpacity: 0.4,
							maxZoom: 18,
							radius: 30,
							blur: 15,
							max: 1.0
						})
						.addTo(map);
					
					var featureLayer = L.mapbox.featureLayer( markers, 
						{
							id: "markers",
							interactive: true,
							type: "symbol",
							source: "markers",
						});
					
					// Layer Toggle
					function changeView(layer) {
						if (layer == "heatmap") {
							map.removeLayer(featureLayer);
							heatmap.addTo(map);
						} else if (layer == "featureLayer") {
							map.removeLayer(heatmap);
							featureLayer.addTo(map);
						}
					};
					
					$('input[name=optradio]:radio').change(function() {
						changeView(this.value);
					});
					
					/*
					addLayer(featureLayer, 'Markers', 2);
					addLayer(heatmap, 'Heatmap', 1);

					function addLayer(layer) {

					    link.onclick = function(e) {
					        e.preventDefault();
					        e.stopPropagation();

					        if (map.hasLayer(layer)) {
					            map.removeLayer(layer);
					            this.className = '';
					        } else {
					            map.addLayer(layer);
					            this.className = 'active';
					        }
					    };
					};*/
					
					
				</script>
			</div>
		</div>
			
	</div>
	<div class="row">
		<footer class="" style="text-align: center; margin-top:10px; background-color:#363636; color: #FFF;">
			<div class="" style="width:100%">
				<div class="container">
					<div class="row">
						<div class="footer-col col-md-6">
							<h4>About</h4>
							<p>The above map was created as a project to...</p>
						</div>
						<div class="footer-col col-md-6">
							<h4>Get in Touch!</h4>
							<!-- Twitter -->
							<a href="https://twitter.com/MrBrettRomero" data-toggle="tooltip" title="Twitter" target="_blank" class="share-btn twitter">
								<i class="fa fa-twitter"></i>
							</a>
							<!-- LinkedIn -->
							<a href="https://www.linkedin.com/in/brett-romero-0880b049" data-toggle="tooltip" title="LinkedIn" target="_blank" class="share-btn linkedin">
								<i class="fa fa-linkedin"></i>
							</a>
							<!-- Blog -->
							<a href="http://brettromero.com/" data-toggle="tooltip" title="Brett Romero" target="_blank" class="share-btn home">
								<i class="fa fa-home"></i>
							</a>
							<br><br>
						</div>
					</div>
				</div>
			</div>
		</footer>
	</div>
</div>

</body>
</html>